<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Picochan: picochan_css</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Picochan<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Picochan documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__picochan__css.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">picochan_css </div></div>
</div><!--header-->
<div class="contents">

<p>Channel Subsystem (CSS)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-files" class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:pmcw_2Eh" id="r_pmcw_2Eh"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmcw_8h.html">pmcw.h</a></td></tr>
<tr class="memdesc:pmcw_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Path Management Control World (PMCW) <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga29f9c167db015c5cd7746ba44c687a79" id="r_ga29f9c167db015c5cd7746ba44c687a79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga29f9c167db015c5cd7746ba44c687a79">PCH_NUM_SCHIBS</a></td></tr>
<tr class="memdesc:ga29f9c167db015c5cd7746ba44c687a79"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of subchannels.  <br /></td></tr>
<tr class="memitem:ga71be1798af4808e2fdb791801231acc2" id="r_ga71be1798af4808e2fdb791801231acc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga71be1798af4808e2fdb791801231acc2">PCH_NUM_CHANNELS</a></td></tr>
<tr class="memdesc:ga71be1798af4808e2fdb791801231acc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of channels that the CSS can use.  <br /></td></tr>
<tr class="memitem:ga50a071db49c94e3e2b962f64ffb559b8" id="r_ga50a071db49c94e3e2b962f64ffb559b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga50a071db49c94e3e2b962f64ffb559b8">PCH_NUM_ISCS</a></td></tr>
<tr class="memdesc:ga50a071db49c94e3e2b962f64ffb559b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of interrupt service classes.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gacc59d63a1e6d6e9c165c69697f6d05c7" id="r_gacc59d63a1e6d6e9c165c69697f6d05c7"><td class="memItemLeft" align="right" valign="top"><a id="gacc59d63a1e6d6e9c165c69697f6d05c7" name="gacc59d63a1e6d6e9c165c69697f6d05c7"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>io_callback_t</b>) (<a class="el" href="intcode_8h.html#a842ba171eeebce9d1277c4d801753759">pch_intcode_t</a>, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a>)</td></tr>
<tr class="memdesc:gacc59d63a1e6d6e9c165c69697f6d05c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback function to be invoked when a subchannel becomes status pending. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae2bfa58ace633877f46311677db440c0" id="r_gae2bfa58ace633877f46311677db440c0"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae2bfa58ace633877f46311677db440c0">pch_ccw_get_addr</a> (<a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> ccw)</td></tr>
<tr class="memdesc:gae2bfa58ace633877f46311677db440c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the addr field of a CCW as a pointer.  <br /></td></tr>
<tr class="memitem:ga73efa9ddbc2d32f8df54eb2317c7043c" id="r_ga73efa9ddbc2d32f8df54eb2317c7043c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga73efa9ddbc2d32f8df54eb2317c7043c">pch_css_init</a> (void)</td></tr>
<tr class="memdesc:ga73efa9ddbc2d32f8df54eb2317c7043c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise CSS.  <br /></td></tr>
<tr class="memitem:ga055b98261b6ae445b00ad90de7ca25c0" id="r_ga055b98261b6ae445b00ad90de7ca25c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga055b98261b6ae445b00ad90de7ca25c0">pch_css_set_func_irq</a> (irq_num_t irqnum)</td></tr>
<tr class="memdesc:ga055b98261b6ae445b00ad90de7ca25c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to set the IRQ number that the CSS uses for application API notification to CSS.  <br /></td></tr>
<tr class="memitem:gaae4058b8e7c558ff10ec14a5790a3034" id="r_gaae4058b8e7c558ff10ec14a5790a3034"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaae4058b8e7c558ff10ec14a5790a3034">pch_css_set_io_irq</a> (irq_num_t irqnum)</td></tr>
<tr class="memdesc:gaae4058b8e7c558ff10ec14a5790a3034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to set the IRQ number that the CSS uses for I/O interrupt notification.  <br /></td></tr>
<tr class="memitem:ga982b69c5ef0b515d74bdf514b228a896" id="r_ga982b69c5ef0b515d74bdf514b228a896"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga982b69c5ef0b515d74bdf514b228a896">pch_css_set_io_callback</a> (<a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a> io_callback)</td></tr>
<tr class="memdesc:ga982b69c5ef0b515d74bdf514b228a896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level function to set the I/O callback function that the CSS invokes if its I/O interrupt handler has been set to pch_css_io_irq_handler. pch_css_start(io_callback, isc_mask) with io_callback non-NULL).  <br /></td></tr>
<tr class="memitem:ga1932f014cc6ce6cad8ae08518b31653a" id="r_ga1932f014cc6ce6cad8ae08518b31653a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1932f014cc6ce6cad8ae08518b31653a">pch_css_start</a> (<a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a> io_callback, uint8_t isc_mask)</td></tr>
<tr class="memdesc:ga1932f014cc6ce6cad8ae08518b31653a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts CSS operation after setting the io_callback (if non-NULL), configuring and enabling any needed CSS IRQ handlers that have not yet been set and setting the mask of ISCs that trigger I/O interrupts to be isc_mask.  <br /></td></tr>
<tr class="memitem:gaedf8e71c06ad7f28503e277dc052d800" id="r_gaedf8e71c06ad7f28503e277dc052d800"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaedf8e71c06ad7f28503e277dc052d800">pch_css_set_trace</a> (bool trace)</td></tr>
<tr class="memdesc:gaedf8e71c06ad7f28503e277dc052d800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets whether CSS tracing is enabled.  <br /></td></tr>
<tr class="memitem:gab710cce44defd25af46cf69b878061e9" id="r_gab710cce44defd25af46cf69b878061e9"><td class="memItemLeft" align="right" valign="top"><a id="gab710cce44defd25af46cf69b878061e9" name="gab710cce44defd25af46cf69b878061e9"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>pch_chp_set_trace_flags</b> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid, uint8_t trace_flags)</td></tr>
<tr class="memdesc:gab710cce44defd25af46cf69b878061e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets what CSS trace events are enabled for channel chpid. Flags may be a combination of PCH_CHP_TRACED_GENERAL, PCH_CHP_TRACED_LINK, PCH_CHP_TRACED_IRQ. Value PCH_CHP_TRACED_MASK is the set of all valid trace flags. If these flags do not include PCH_CHP_TRACED_GENERAL then no trace records are written for schibs using this channel regardless of any per-schib trace flags. Returns the old set of trace flags. <br /></td></tr>
<tr class="memitem:ga3f588a511e0125681057591500e154d8" id="r_ga3f588a511e0125681057591500e154d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3f588a511e0125681057591500e154d8">pch_chp_start</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid)</td></tr>
<tr class="memdesc:ga3f588a511e0125681057591500e154d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts channel chpid connection to its remote CU.  <br /></td></tr>
<tr class="memitem:gae0cc140a8e4e4ac120081dee3f78ebe5" id="r_gae0cc140a8e4e4ac120081dee3f78ebe5"><td class="memItemLeft" align="right" valign="top"><a id="gae0cc140a8e4e4ac120081dee3f78ebe5" name="gae0cc140a8e4e4ac120081dee3f78ebe5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pch_chp_claim</b> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid)</td></tr>
<tr class="memdesc:gae0cc140a8e4e4ac120081dee3f78ebe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark channel path chpid as claimed. Panics if it is already claimed or allocated. <br /></td></tr>
<tr class="memitem:gaaea6657d75d8da8c96080a52471c3aff" id="r_gaaea6657d75d8da8c96080a52471c3aff"><td class="memItemLeft" align="right" valign="top"><a id="gaaea6657d75d8da8c96080a52471c3aff" name="gaaea6657d75d8da8c96080a52471c3aff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pch_chp_claim_unused</b> (bool required)</td></tr>
<tr class="memdesc:gaaea6657d75d8da8c96080a52471c3aff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Claims the next unclaimed and unallocated channel path and returns its CHPID (a <a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff" title="a channel path identifier between 0 and PCH_NUM_CHANNELS-1 (at most 255) that identifies a channel fr...">pch_chpid_t</a> cast to int). If no channel path is available, panics if required is true or else returns -1. <br /></td></tr>
<tr class="memitem:ga8cd3408861750809a77da144b05299b8" id="r_ga8cd3408861750809a77da144b05299b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8cd3408861750809a77da144b05299b8">pch_chp_alloc</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid, uint16_t num_devices)</td></tr>
<tr class="memdesc:ga8cd3408861750809a77da144b05299b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates num_devices schibs for use by channel chpid.  <br /></td></tr>
<tr class="memitem:gaf5e75ab1d05aede4691768fe564a7a6a" id="r_gaf5e75ab1d05aede4691768fe564a7a6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf5e75ab1d05aede4691768fe564a7a6a">pch_chp_configure_uartchan</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid, uart_inst_t *uart, dma_channel_config ctrl)</td></tr>
<tr class="memdesc:gaf5e75ab1d05aede4691768fe564a7a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a UART channel.  <br /></td></tr>
<tr class="memitem:ga1016915ceba4d2c84e53767efa4163a9" id="r_ga1016915ceba4d2c84e53767efa4163a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1016915ceba4d2c84e53767efa4163a9">pch_chp_auto_configure_uartchan</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid, uart_inst_t *uart, uint baudrate)</td></tr>
<tr class="memdesc:ga1016915ceba4d2c84e53767efa4163a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise and configure a hardware UART instance as a channel to the remote CU to which it is connected. Uses a default dma_channel_config control register.  <br /></td></tr>
<tr class="memitem:gae4c6bcc8a8da784541ae088dc90a7b43" id="r_gae4c6bcc8a8da784541ae088dc90a7b43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4c6bcc8a8da784541ae088dc90a7b43">pch_chp_configure_memchan</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid, <a class="el" href="group__picochan__base.html#ga6705e933e26b2eacd30534ef98a638af">pch_dmaid_t</a> txdmaid, <a class="el" href="group__picochan__base.html#ga6705e933e26b2eacd30534ef98a638af">pch_dmaid_t</a> rxdmaid, <a class="el" href="structdmachan__tx__channel.html">dmachan_tx_channel_t</a> *txpeer)</td></tr>
<tr class="memdesc:gae4c6bcc8a8da784541ae088dc90a7b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a memchan channel.  <br /></td></tr>
<tr class="memitem:ga1ff6be2ad0654c29681d3d0332e57c89" id="r_ga1ff6be2ad0654c29681d3d0332e57c89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdmachan__tx__channel.html">dmachan_tx_channel_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1ff6be2ad0654c29681d3d0332e57c89">pch_chp_get_tx_channel</a> (<a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a> chpid)</td></tr>
<tr class="memdesc:ga1ff6be2ad0654c29681d3d0332e57c89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the internal tx side of a channel from CSS to CU.  <br /></td></tr>
<tr class="memitem:gacd3ec3ecf542a8b379f8361800567971" id="r_gacd3ec3ecf542a8b379f8361800567971"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacd3ec3ecf542a8b379f8361800567971">pch_sch_start</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *ccw_addr)</td></tr>
<tr class="memdesc:gacd3ec3ecf542a8b379f8361800567971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a channel program for a subchannel.  <br /></td></tr>
<tr class="memitem:gaf72052e0d2544c9fa7e847be9cc57d5d" id="r_gaf72052e0d2544c9fa7e847be9cc57d5d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf72052e0d2544c9fa7e847be9cc57d5d">pch_sch_resume</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid)</td></tr>
<tr class="memdesc:gaf72052e0d2544c9fa7e847be9cc57d5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume a channel program for a subchannel.  <br /></td></tr>
<tr class="memitem:ga13a70bb0036e2d1d807cf89c4ad72e59" id="r_ga13a70bb0036e2d1d807cf89c4ad72e59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga13a70bb0036e2d1d807cf89c4ad72e59">pch_sch_test</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *scsw)</td></tr>
<tr class="memdesc:ga13a70bb0036e2d1d807cf89c4ad72e59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test the status of a subchannel, clearing various status conditions of status is pending.  <br /></td></tr>
<tr class="memitem:gac4a94df6253bb493e46f9c430ee86739" id="r_gac4a94df6253bb493e46f9c430ee86739"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac4a94df6253bb493e46f9c430ee86739">pch_sch_modify</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="pmcw_8h.html#af73e82a305fab4742b63ccfe6aa36e2b">pch_pmcw_t</a> *pmcw)</td></tr>
<tr class="memdesc:gac4a94df6253bb493e46f9c430ee86739"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies the PMCW field of a subchannel.  <br /></td></tr>
<tr class="memitem:gac93b2a19bf53af0896f2abbc76daa446" id="r_gac93b2a19bf53af0896f2abbc76daa446"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac93b2a19bf53af0896f2abbc76daa446">pch_sch_store</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="group__picochan__base.html#ga3b35c1d1ecbdbb04f997457dc8b28506">pch_schib_t</a> *out_schib)</td></tr>
<tr class="memdesc:gac93b2a19bf53af0896f2abbc76daa446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the contents of the schib for subchannel sid to out_schib.  <br /></td></tr>
<tr class="memitem:ga232d076e84e9abf62ffb98e74117c67c" id="r_ga232d076e84e9abf62ffb98e74117c67c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga232d076e84e9abf62ffb98e74117c67c">pch_sch_cancel</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid)</td></tr>
<tr class="memdesc:ga232d076e84e9abf62ffb98e74117c67c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a channel program that has not yet started.  <br /></td></tr>
<tr class="memitem:gad3a0ad6cfdac814e9a1287f6f22156b2" id="r_gad3a0ad6cfdac814e9a1287f6f22156b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad3a0ad6cfdac814e9a1287f6f22156b2">pch_sch_halt</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid)</td></tr>
<tr class="memdesc:gad3a0ad6cfdac814e9a1287f6f22156b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Halt a channel program.  <br /></td></tr>
<tr class="memitem:ga99bbed087f8d0aea5f6d6f240316c3fa" id="r_ga99bbed087f8d0aea5f6d6f240316c3fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="intcode_8h.html#a842ba171eeebce9d1277c4d801753759">pch_intcode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga99bbed087f8d0aea5f6d6f240316c3fa">pch_test_pending_interruption</a> (void)</td></tr>
<tr class="memdesc:ga99bbed087f8d0aea5f6d6f240316c3fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if there is a pending I/O interruption.  <br /></td></tr>
<tr class="memitem:ga8f3271b3a82985e9c76d448ac2f1d5db" id="r_ga8f3271b3a82985e9c76d448ac2f1d5db"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8f3271b3a82985e9c76d448ac2f1d5db">pch_sch_store_pmcw</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="pmcw_8h.html#af73e82a305fab4742b63ccfe6aa36e2b">pch_pmcw_t</a> *out_pmcw)</td></tr>
<tr class="memdesc:ga8f3271b3a82985e9c76d448ac2f1d5db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the contents of the PMCW part of the schib for subchannel sid to out_pmcw.  <br /></td></tr>
<tr class="memitem:gaaa294ff939b747f4625c3454c7b1de81" id="r_gaaa294ff939b747f4625c3454c7b1de81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaaa294ff939b747f4625c3454c7b1de81">pch_sch_store_scsw</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *out_scsw)</td></tr>
<tr class="memdesc:gaaa294ff939b747f4625c3454c7b1de81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the contents of the SCSW part of the schib for subchannel sid to out_scsw.  <br /></td></tr>
<tr class="memitem:gac82108859bba4a845bd6749cf3a948e8" id="r_gac82108859bba4a845bd6749cf3a948e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac82108859bba4a845bd6749cf3a948e8">pch_sch_modify_intparm</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, uint32_t intparm)</td></tr>
<tr class="memdesc:gac82108859bba4a845bd6749cf3a948e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies the intparm field of the PMCW part of the schib for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga2e52ee9acfa402c434841a27a3cd01d7" id="r_ga2e52ee9acfa402c434841a27a3cd01d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2e52ee9acfa402c434841a27a3cd01d7">pch_sch_modify_flags</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, uint16_t flags)</td></tr>
<tr class="memdesc:ga2e52ee9acfa402c434841a27a3cd01d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies the flags field of the PMCW part of the schib for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga74938a635c117f15dd8e63d6d9bccb24" id="r_ga74938a635c117f15dd8e63d6d9bccb24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga74938a635c117f15dd8e63d6d9bccb24">pch_sch_modify_isc</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, uint8_t isc)</td></tr>
<tr class="memdesc:ga74938a635c117f15dd8e63d6d9bccb24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies the isc field of the PMCW part of the schib for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga6e073b7261c9901822d3c54ebe4cdf04" id="r_ga6e073b7261c9901822d3c54ebe4cdf04"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e073b7261c9901822d3c54ebe4cdf04">pch_sch_modify_enabled</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, bool enabled)</td></tr>
<tr class="memdesc:ga6e073b7261c9901822d3c54ebe4cdf04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies enabled flag of the schib for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga005e8f9c6d0ee62f862a41b56d05fe2c" id="r_ga005e8f9c6d0ee62f862a41b56d05fe2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga005e8f9c6d0ee62f862a41b56d05fe2c">pch_sch_modify_traced</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, bool traced)</td></tr>
<tr class="memdesc:ga005e8f9c6d0ee62f862a41b56d05fe2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifies traced flag of the schib for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga0801241357d0067f213b671aeb5f964f" id="r_ga0801241357d0067f213b671aeb5f964f"><td class="memItemLeft" align="right" valign="top"><a id="ga0801241357d0067f213b671aeb5f964f" name="ga0801241357d0067f213b671aeb5f964f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>void</b> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, uint count, uint8_t isc)</td></tr>
<tr class="memdesc:ga0801241357d0067f213b671aeb5f964f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="#ga74938a635c117f15dd8e63d6d9bccb24" title="Modifies the isc field of the PMCW part of the schib for subchannel sid.">pch_sch_modify_isc()</a> on count subchannels starting from sid, panicking if any call fails. <br /></td></tr>
<tr class="memitem:gae253dc22706dbda9b556123e6d0a7d18" id="r_gae253dc22706dbda9b556123e6d0a7d18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae253dc22706dbda9b556123e6d0a7d18">void</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, uint count, bool enabled)</td></tr>
<tr class="memdesc:gae253dc22706dbda9b556123e6d0a7d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="#ga6e073b7261c9901822d3c54ebe4cdf04" title="Modifies enabled flag of the schib for subchannel sid.">pch_sch_modify_enabled()</a> on count subchannels starting from sid, panicking if any call fails.  <br /></td></tr>
<tr class="memitem:ga11aff02d884b730ca27b9b39ca331b5c" id="r_ga11aff02d884b730ca27b9b39ca331b5c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga11aff02d884b730ca27b9b39ca331b5c">pch_sch_wait</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *scsw)</td></tr>
<tr class="memdesc:ga11aff02d884b730ca27b9b39ca331b5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for an I/O interruption condition for subchannel sid.  <br /></td></tr>
<tr class="memitem:ga1d47307d6ee59b624f40528f6d270fa5" id="r_ga1d47307d6ee59b624f40528f6d270fa5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1d47307d6ee59b624f40528f6d270fa5">pch_sch_wait_timeout</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *scsw, absolute_time_t timeout_timestamp)</td></tr>
<tr class="memdesc:ga1d47307d6ee59b624f40528f6d270fa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for an I/O interruption condition for subchannel sid with a timeout.  <br /></td></tr>
<tr class="memitem:ga4779e3ec64b8c65357650a3a2f8cfd1c" id="r_ga4779e3ec64b8c65357650a3a2f8cfd1c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4779e3ec64b8c65357650a3a2f8cfd1c">pch_sch_run_wait</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *ccw_addr, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *scsw)</td></tr>
<tr class="memdesc:ga4779e3ec64b8c65357650a3a2f8cfd1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a channel program for a subchannel and wait for an I/O interruption condition.  <br /></td></tr>
<tr class="memitem:ga5bacc4854440a3df11e8edda40410ccf" id="r_ga5bacc4854440a3df11e8edda40410ccf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5bacc4854440a3df11e8edda40410ccf">pch_sch_run_wait_timeout</a> (<a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> sid, <a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *ccw_addr, <a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *scsw, absolute_time_t timeout_timestamp)</td></tr>
<tr class="memdesc:ga5bacc4854440a3df11e8edda40410ccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a channel program for a subchannel and wait for an I/O interruption condition with a timeout.  <br /></td></tr>
<tr class="memitem:gae8d99610900108b3b9ea3cc460784b5c" id="r_gae8d99610900108b3b9ea3cc460784b5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae8d99610900108b3b9ea3cc460784b5c">pch_cus_auto_configure_uartcu</a> (<a class="el" href="group__picochan__base.html#ga0cf813e237e3a90e67a308ee9865a011">pch_cuaddr_t</a> cua, uart_inst_t *uart, uint baudrate)</td></tr>
<tr class="memdesc:gae8d99610900108b3b9ea3cc460784b5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise and configure a UART control unit with default dma_channel_config control register.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Channel Subsystem (CSS) </p>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ga71be1798af4808e2fdb791801231acc2" name="ga71be1798af4808e2fdb791801231acc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga71be1798af4808e2fdb791801231acc2">&#9670;&#160;</a></span>PCH_NUM_CHANNELS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCH_NUM_CHANNELS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of channels that the CSS can use. </p>
<p>Must be a compile-time constant between 1 and 256. Default 4. One channel is needed to connect to each CU. Defines the size of the global array of CSS-side channel structures (see <a class="el" href="group__internal__css.html#ga518b79be5ed7747d123c2aea76f01922">pch_chp_t</a>). </p>

</div>
</div>
<a id="ga50a071db49c94e3e2b962f64ffb559b8" name="ga50a071db49c94e3e2b962f64ffb559b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50a071db49c94e3e2b962f64ffb559b8">&#9670;&#160;</a></span>PCH_NUM_ISCS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCH_NUM_ISCS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of interrupt service classes. </p>
<p>Must be a compile-time constant between 1 and 8. Default 8. Defines the size of the global array of linked-list-headers for subchannels that are status pending. </p>

</div>
</div>
<a id="ga29f9c167db015c5cd7746ba44c687a79" name="ga29f9c167db015c5cd7746ba44c687a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29f9c167db015c5cd7746ba44c687a79">&#9670;&#160;</a></span>PCH_NUM_SCHIBS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCH_NUM_SCHIBS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of subchannels. </p>
<p>Must be a compile-time constant between 1 and 65536. Default 32. Defines the size of the global array of schibs (see <a class="el" href="group__picochan__base.html#ga3b35c1d1ecbdbb04f997457dc8b28506">pch_schib_t</a>). </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="gae2bfa58ace633877f46311677db440c0" name="gae2bfa58ace633877f46311677db440c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2bfa58ace633877f46311677db440c0">&#9670;&#160;</a></span>pch_ccw_get_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * pch_ccw_get_addr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a></td>          <td class="paramname"><span class="paramname"><em>ccw</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the addr field of a CCW as a pointer. </p>
<p>This is a convenience function that cannot be put in <a class="el" href="ccw_8h.html" title="Channel-Command Word (CCW)">ccw.h</a> itself since the architected addr field is 32 bits and <a class="el" href="ccw_8h.html" title="Channel-Command Word (CCW)">ccw.h</a> must be usable on platforms where a (void*) is longer without causing compiler warnings (for example for compiling pch_dump_trace off-platform). </p>

</div>
</div>
<a id="ga8cd3408861750809a77da144b05299b8" name="ga8cd3408861750809a77da144b05299b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8cd3408861750809a77da144b05299b8">&#9670;&#160;</a></span>pch_chp_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a> pch_chp_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>num_devices</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates num_devices schibs for use by channel chpid. </p>
<p>Starting with the first unallocated schib in the CSS array of schibs, allocates num_devices consecutive schibs and initialises them to reference the devices with unit addresses 0 through num_devices-1 respectively on the CU to which channel chpid will connect. The total number of allocated schibs must not exceed the size of the array, PCH_NUM_SCHIBS. A check for this and other sanity checks on the arguments are made only if assertions are enabled. CSS must have been started (<a class="el" href="#ga1932f014cc6ce6cad8ae08518b31653a">pch_css_start()</a>) but this channel must not have been started yet (<a class="el" href="#ga3f588a511e0125681057591500e154d8">pch_chp_start()</a>). Returns the SID of the first allocated schib. </p>

</div>
</div>
<a id="ga1016915ceba4d2c84e53767efa4163a9" name="ga1016915ceba4d2c84e53767efa4163a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1016915ceba4d2c84e53767efa4163a9">&#9670;&#160;</a></span>pch_chp_auto_configure_uartchan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_chp_auto_configure_uartchan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uart_inst_t *</td>          <td class="paramname"><span class="paramname"><em>uart</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>baudrate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise and configure a hardware UART instance as a channel to the remote CU to which it is connected. Uses a default dma_channel_config control register. </p>
<p>Calls pch_uart_init() with baud rate</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baudrate</td><td>and pch_chp_configure_uartchan with ctrl argument bits taken from an appropriate dma_channel_get_default_config() value. The CU on the other side of the channel <em>MUST</em> use the same baud rate and uart settings. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae4c6bcc8a8da784541ae088dc90a7b43" name="gae4c6bcc8a8da784541ae088dc90a7b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4c6bcc8a8da784541ae088dc90a7b43">&#9670;&#160;</a></span>pch_chp_configure_memchan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_chp_configure_memchan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga6705e933e26b2eacd30534ef98a638af">pch_dmaid_t</a></td>          <td class="paramname"><span class="paramname"><em>txdmaid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga6705e933e26b2eacd30534ef98a638af">pch_dmaid_t</a></td>          <td class="paramname"><span class="paramname"><em>rxdmaid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdmachan__tx__channel.html">dmachan_tx_channel_t</a> *</td>          <td class="paramname"><span class="paramname"><em>txpeer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a memchan channel. </p>
<p>A memchan channel allows the CSS to run on one core of a Pico while a CU runs on the other core. Instead of using physical pins or connections between CU and CSS, picochan uses the DMA channels to copy memory-to-memory between CSS and CU and an internal state machine and cross-core synchronisation to mediate CSS to CU communications. txdmaid and rxdmaid must be two unused DMA ids, typically allocated using dma_claim_unused_channel(). In order for the CSS to find the CU-side information to cross-connect the sides in memory, the CU API function <a class="el" href="group__picochan__cu.html#ga98dd293308d9db0561e6ebdd68edaeef" title="Fetch the internal tx side of a channel from CU to CSS.">pch_cu_get_tx_channel()</a> must be used to fetch the internal dmachan_tx_channel_t of the peer CU for passing to pch_chp_configure_memchan. </p>

</div>
</div>
<a id="gaf5e75ab1d05aede4691768fe564a7a6a" name="gaf5e75ab1d05aede4691768fe564a7a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5e75ab1d05aede4691768fe564a7a6a">&#9670;&#160;</a></span>pch_chp_configure_uartchan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_chp_configure_uartchan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uart_inst_t *</td>          <td class="paramname"><span class="paramname"><em>uart</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dma_channel_config</td>          <td class="paramname"><span class="paramname"><em>ctrl</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a UART channel. </p>
<p>Configure the hardware UART instance uart as a channel to the remote CU to which it is connected. The UART must have been initialised already, be connected to a CU using the same baud rate as this channel has configured and the hardware flow control pins, CTS and RTS <em>MUST</em> be enabled and connected between channel and CU. ctrl should typically be a default dma_channel_config as returned from dma_channel_get_default_config(dmaid) invoked on any DMA id. Most bits in that dma_channel_config are overridden by the CSS (including the CHAIN_TO which is why the dmaid above does not matter) but some applications may wish to set bits SNIFF_EN and HIGH_PRIORITY for their own purposes.</p>
<p>If you want to initialise and configure the UART channel using a given baud rate, suggested UART settings (8E1) and default DMA control register settings (no SNIFF_EN and no HIGH_PRIORITY), you can use <a class="el" href="#ga1016915ceba4d2c84e53767efa4163a9" title="Initialise and configure a hardware UART instance as a channel to the remote CU to which it is connec...">pch_chp_auto_configure_uartchan()</a> instead. </p>

</div>
</div>
<a id="ga1ff6be2ad0654c29681d3d0332e57c89" name="ga1ff6be2ad0654c29681d3d0332e57c89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ff6be2ad0654c29681d3d0332e57c89">&#9670;&#160;</a></span>pch_chp_get_tx_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdmachan__tx__channel.html">dmachan_tx_channel_t</a> * pch_chp_get_tx_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch the internal tx side of a channel from CSS to CU. </p>
<p>This function is only needed when configuring a memchan between a CSS and CU on different cores of a single Pico. The CU initialisation procedure uses this function to find its peer CSS structure in order to cross-connect the channels. </p>

</div>
</div>
<a id="ga3f588a511e0125681057591500e154d8" name="ga3f588a511e0125681057591500e154d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f588a511e0125681057591500e154d8">&#9670;&#160;</a></span>pch_chp_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_chp_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#gad50e88c5418c063d8bb3b66df7ef04ff">pch_chpid_t</a></td>          <td class="paramname"><span class="paramname"><em>chpid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts channel chpid connection to its remote CU. </p>
<p>The channel must be already configured but not have been started. Marks the channel as started and starts it, allowing it to receive commands from its remote CU. </p>

</div>
</div>
<a id="ga73efa9ddbc2d32f8df54eb2317c7043c" name="ga73efa9ddbc2d32f8df54eb2317c7043c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga73efa9ddbc2d32f8df54eb2317c7043c">&#9670;&#160;</a></span>pch_css_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_css_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise CSS. </p>
<p>Must be called before any other CSS function. </p>

</div>
</div>
<a id="ga055b98261b6ae445b00ad90de7ca25c0" name="ga055b98261b6ae445b00ad90de7ca25c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga055b98261b6ae445b00ad90de7ca25c0">&#9670;&#160;</a></span>pch_css_set_func_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_css_set_func_irq </td>
          <td>(</td>
          <td class="paramtype">irq_num_t</td>          <td class="paramname"><span class="paramname"><em>irqnum</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low-level function to set the IRQ number that the CSS uses for application API notification to CSS. </p>
<p>Typically, should be a non-externally-used user IRQ (i.e. IRQ numbers 26-31 on RP2040 and IRQ numbers 46-51 (SPAREIRQ_IRQ0 through SPAREIRQ_IRQ5) on RP2350. In general, either the high-level convenience function pch_css_auto_configure_func_irq() should be used instead or, for mid-level control of the handler, variants on pch_css_configure_func_irq... </p>

</div>
</div>
<a id="ga982b69c5ef0b515d74bdf514b228a896" name="ga982b69c5ef0b515d74bdf514b228a896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga982b69c5ef0b515d74bdf514b228a896">&#9670;&#160;</a></span>pch_css_set_io_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a> pch_css_set_io_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a></td>          <td class="paramname"><span class="paramname"><em>io_callback</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low-level function to set the I/O callback function that the CSS invokes if its I/O interrupt handler has been set to pch_css_io_irq_handler. pch_css_start(io_callback, isc_mask) with io_callback non-NULL). </p>
<p>Sets a callback function which pch_css_io_irq_handler will invoke on subchannels with unmasked ISC and pending status.</p>
<p>Typically, this should instead be set implicitly by calling pch_css_start(io_callback, isc_mask) with io_callback non-NULL.</p>
<p>If pch_css_io_irq_handler is added as an ISR for the CSS I/O IRQ index (itself set with <a class="el" href="#gaae4058b8e7c558ff10ec14a5790a3034">pch_css_set_io_irq</a>), then when called, it pops each subchannel that is in an unmasked ISC and is status pending, retrieves the SCSW for that subchannel and calls the callback function.</p>
<p>Low-level function to set the I/O callback function that the CSS invokes if its I/O interrupt handler has been set to pch_css_io_irq_handler. pch_css_start(io_callback, isc_mask) with io_callback non-NULL).</p>
<p>If pch_css_io_irq_handler is added as an ISR for the CSS I/O IRQ index (itself set with <a class="el" href="#gaae4058b8e7c558ff10ec14a5790a3034">pch_css_set_io_irq</a>), then when called, it pops each subchannel that is in an unmasked ISC and is status pending, retrieves the SCSW for that subchannel and calls the callback function. </p>

</div>
</div>
<a id="gaae4058b8e7c558ff10ec14a5790a3034" name="gaae4058b8e7c558ff10ec14a5790a3034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae4058b8e7c558ff10ec14a5790a3034">&#9670;&#160;</a></span>pch_css_set_io_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_css_set_io_irq </td>
          <td>(</td>
          <td class="paramtype">irq_num_t</td>          <td class="paramname"><span class="paramname"><em>irqnum</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low-level function to set the IRQ number that the CSS uses for I/O interrupt notification. </p>
<p>Sets the IRQ number that the CSS raises when a subchannel becomes status pending.</p>
<p>Typically, should be a non-externally-used user IRQ (i.e. IRQ numbers 26-31 on RP2040 and IRQ numbers 46-51 (SPAREIRQ_IRQ0 through SPAREIRQ_IRQ5) on RP2350. In general, either the high-level convenience function pch_css_auto_configure_io_irq() should be used instead or, for mid-level control of the handler, variants on pch_css_configure_io_irq...</p>
<p>Typically, should be a non-externally used IRQ (i.e. IRQ numbers 26-31 on RP2040 and IRQ numbers 46-51 (SPAREIRQ_IRQ0 through SPAREIRQ_IRQ5) on RP2350. Although the application can use its own ISR if it wishes, adding function pch_css_io_irq_handler as an ISR for this interrupt lets the CSS itself handle callbacks for subchannels with pending status (see <a class="el" href="#ga982b69c5ef0b515d74bdf514b228a896">pch_css_set_io_callback</a>).</p>
<p>Low-level function to set the IRQ number that the CSS uses for I/O interrupt notification.</p>
<p>Typically, should be a non-externally used IRQ (i.e. IRQ numbers 26-31 on RP2040 and IRQ numbers 46-51 (SPAREIRQ_IRQ0 through SPAREIRQ_IRQ5) on RP2350. Although the application can use its own ISR if it wishes, adding function pch_css_io_irq_handler as an ISR for this interrupt lets the CSS itself handle callbacks for subchannels with pending status (see <a class="el" href="#ga982b69c5ef0b515d74bdf514b228a896">pch_css_set_io_callback</a>). </p>

</div>
</div>
<a id="gaedf8e71c06ad7f28503e277dc052d800" name="gaedf8e71c06ad7f28503e277dc052d800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaedf8e71c06ad7f28503e277dc052d800">&#9670;&#160;</a></span>pch_css_set_trace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pch_css_set_trace </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>trace</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets whether CSS tracing is enabled. </p>
<p>If this flag is not set to be true then no CSS trace records are written, regardless of any per-channel or per-subchannel trace flags. </p>

</div>
</div>
<a id="ga1932f014cc6ce6cad8ae08518b31653a" name="ga1932f014cc6ce6cad8ae08518b31653a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1932f014cc6ce6cad8ae08518b31653a">&#9670;&#160;</a></span>pch_css_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_css_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#gacc59d63a1e6d6e9c165c69697f6d05c7">io_callback_t</a></td>          <td class="paramname"><span class="paramname"><em>io_callback</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>isc_mask</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts CSS operation after setting the io_callback (if non-NULL), configuring and enabling any needed CSS IRQ handlers that have not yet been set and setting the mask of ISCs that trigger I/O interrupts to be isc_mask. </p>
<p><a class="el" href="#ga73efa9ddbc2d32f8df54eb2317c7043c" title="Initialise CSS.">pch_css_init()</a> must be called before calling this function. If the CSS DMA IRQ index is not yet set, it is configured using the index number corresponding to the current core number. If the function IRQ is not set, it is configured by claiming an unused user IRQ, setting the handler to pch_css_func_irq_handler and enabling the IRQ. If io_callback is non-NULL then it is set as the CSS io_callback function after, if the I/O IRQ is not set, configuring it by claiming an unused IRQ, settting the handler to pch_css_io_irq_handler and enabling the IRQ. Any IRQ handlers set from this function are added using irq_add_shared_handler() with an order_priority of PICO_SHARED_IRQ_HANDLER_DEFAULT_ORDER_PRIORITY. </p>

</div>
</div>
<a id="gae8d99610900108b3b9ea3cc460784b5c" name="gae8d99610900108b3b9ea3cc460784b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8d99610900108b3b9ea3cc460784b5c">&#9670;&#160;</a></span>pch_cus_auto_configure_uartcu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pch_cus_auto_configure_uartcu </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga0cf813e237e3a90e67a308ee9865a011">pch_cuaddr_t</a></td>          <td class="paramname"><span class="paramname"><em>cua</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uart_inst_t *</td>          <td class="paramname"><span class="paramname"><em>uart</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>baudrate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise and configure a UART control unit with default dma_channel_config control register. </p>
<p>Calls pch_uart_init() with baud rate</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baudrate</td><td>and pch_cus_uartcu_configure with ctrl argument bits taken from an appropriate dma_channel_get_default_config() value. The CSS on the other side of the channel MUST use the same baud rate and uart settings set pch_uart_init(). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga232d076e84e9abf62ffb98e74117c67c" name="ga232d076e84e9abf62ffb98e74117c67c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga232d076e84e9abf62ffb98e74117c67c">&#9670;&#160;</a></span>pch_sch_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a channel program that has not yet started. </p>
<p>pch_sch_cancel tries to cancel a channel program before it has started. If pch_sch_cancel is called before the CSS has actually started the channel program (meaning that <a class="el" href="#gacd3ec3ecf542a8b379f8361800567971" title="Start a channel program for a subchannel.">pch_sch_start()</a> has set the AcStartPending in the subchannel's SCSW control flags but the function IRQ handler that would then process the Start has not yet run), then it cancels the start and returns condition code 0. Otherwise, it returns 1 meaning "too late to cancel" or 2 for "no such sid".</p>
<p>pch_sch_cancel only acts on the schib; it does not trigger any interrupt to cause any function IRQ not does it communicate with the CU in any way. </p>

</div>
</div>
<a id="gad3a0ad6cfdac814e9a1287f6f22156b2" name="gad3a0ad6cfdac814e9a1287f6f22156b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad3a0ad6cfdac814e9a1287f6f22156b2">&#9670;&#160;</a></span>pch_sch_halt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_halt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Halt a channel program. </p>
<p>pch_sch_halt tries to halt a channel program. It sets the subchannel's AcHaltPending flag and triggers a CSS function IRQ which sends a Halt command to the CU for the device. The CU and device driver are responsible for acting on the Halt command in a timely manner and responding with an UpdateStatus to end the channel program as soon as reasonably convenient. Depending on the device driver, the Halt may or may not return a normal status. </p>

</div>
</div>
<a id="gac4a94df6253bb493e46f9c430ee86739" name="gac4a94df6253bb493e46f9c430ee86739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4a94df6253bb493e46f9c430ee86739">&#9670;&#160;</a></span>pch_sch_modify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pmcw_8h.html#af73e82a305fab4742b63ccfe6aa36e2b">pch_pmcw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pmcw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies the PMCW field of a subchannel. </p>
<p>Only the following parts of the PMCW of the subchannel are modified by this function; all other parts are ignored:</p>
<ul>
<li>intparm</li>
<li>flags bits in mask PCH_PMCW_SCH_MODIFY_MASK</li>
</ul>
<p>The bits in PCH_PMCW_SCH_MODIFY_MASK are PCH_PMCW_ENABLED, PCH_PMCW_TRACED and the ISC bits, PCH_PMCW_ISC_BITS. </p>

</div>
</div>
<a id="ga6e073b7261c9901822d3c54ebe4cdf04" name="ga6e073b7261c9901822d3c54ebe4cdf04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e073b7261c9901822d3c54ebe4cdf04">&#9670;&#160;</a></span>pch_sch_modify_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify_enabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enabled</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies enabled flag of the schib for subchannel sid. </p>
<p>This is a convenience/optimised subset of pch_sch_modify that only modifies the enabled flag of the subchannel. </p>

</div>
</div>
<a id="ga2e52ee9acfa402c434841a27a3cd01d7" name="ga2e52ee9acfa402c434841a27a3cd01d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e52ee9acfa402c434841a27a3cd01d7">&#9670;&#160;</a></span>pch_sch_modify_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies the flags field of the PMCW part of the schib for subchannel sid. </p>
<p>This is a convenience/optimised subset of pch_sch_modify that only modifies the PMCW flags of the subchannel. </p>

</div>
</div>
<a id="gac82108859bba4a845bd6749cf3a948e8" name="gac82108859bba4a845bd6749cf3a948e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac82108859bba4a845bd6749cf3a948e8">&#9670;&#160;</a></span>pch_sch_modify_intparm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify_intparm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>intparm</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies the intparm field of the PMCW part of the schib for subchannel sid. </p>
<p>This is a convenience/optimised subset of pch_sch_modify that only modifies the Interruption Parameter of the subchannel. </p>

</div>
</div>
<a id="ga74938a635c117f15dd8e63d6d9bccb24" name="ga74938a635c117f15dd8e63d6d9bccb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga74938a635c117f15dd8e63d6d9bccb24">&#9670;&#160;</a></span>pch_sch_modify_isc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify_isc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>isc</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies the isc field of the PMCW part of the schib for subchannel sid. </p>
<p>This is a convenience/optimised subset of pch_sch_modify that only modifies the ISC of the subchannel. </p>

</div>
</div>
<a id="ga005e8f9c6d0ee62f862a41b56d05fe2c" name="ga005e8f9c6d0ee62f862a41b56d05fe2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga005e8f9c6d0ee62f862a41b56d05fe2c">&#9670;&#160;</a></span>pch_sch_modify_traced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_modify_traced </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>traced</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modifies traced flag of the schib for subchannel sid. </p>
<p>This is a convenience/optimised subset of pch_sch_modify that only modifies the traced flag of the subchannel. </p>

</div>
</div>
<a id="gaf72052e0d2544c9fa7e847be9cc57d5d" name="gaf72052e0d2544c9fa7e847be9cc57d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf72052e0d2544c9fa7e847be9cc57d5d">&#9670;&#160;</a></span>pch_sch_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_resume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume a channel program for a subchannel. </p>
<p>Resumes a channel program that has been started for subchannel sid but has become suspended by reaching a CCW with the Suspend flag (PCH_CCW_FLAG_S) set.</p>
<p>The function updates an internal linked list and state then raises an IRQ for the CSS to resume the channel program asynchronously. For a Release-build, the function will typically take dozens rather than hundreds of CPU cycles. </p>

</div>
</div>
<a id="ga4779e3ec64b8c65357650a3a2f8cfd1c" name="ga4779e3ec64b8c65357650a3a2f8cfd1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4779e3ec64b8c65357650a3a2f8cfd1c">&#9670;&#160;</a></span>pch_sch_run_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_run_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ccw_addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>scsw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a channel program for a subchannel and wait for an I/O interruption condition. </p>
<p>This is a convenience function which calls pch_sch_start to start a channel program for subchannel sid and then calls pch_sch_wait to wait for it to become status pending. </p>

</div>
</div>
<a id="ga5bacc4854440a3df11e8edda40410ccf" name="ga5bacc4854440a3df11e8edda40410ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bacc4854440a3df11e8edda40410ccf">&#9670;&#160;</a></span>pch_sch_run_wait_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_run_wait_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ccw_addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>scsw</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absolute_time_t</td>          <td class="paramname"><span class="paramname"><em>timeout_timestamp</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a channel program for a subchannel and wait for an I/O interruption condition with a timeout. </p>
<p>This is a convenience function which calls pch_sch_start to start a channel program for subchannel sid and then calls pch_sch_wait_timeout to wait for it to become status pending or for a timeout to expire. </p>

</div>
</div>
<a id="gacd3ec3ecf542a8b379f8361800567971" name="gacd3ec3ecf542a8b379f8361800567971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd3ec3ecf542a8b379f8361800567971">&#9670;&#160;</a></span>pch_sch_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga0182de6d6c4649114059eb89a140ad6a">pch_ccw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>ccw_addr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a channel program for a subchannel. </p>
<p>Starts a channel program running for subchannel sid starting with the CCW at address ccw_addr.</p>
<p>The function updates an internal linked list and state then raises an IRQ for the CSS to start the channel program asynchronously. For a Release-build, the function will typically take dozens rather than hundreds of CPU cycles. </p>

</div>
</div>
<a id="gac93b2a19bf53af0896f2abbc76daa446" name="gac93b2a19bf53af0896f2abbc76daa446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac93b2a19bf53af0896f2abbc76daa446">&#9670;&#160;</a></span>pch_sch_store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_store </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga3b35c1d1ecbdbb04f997457dc8b28506">pch_schib_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_schib</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the contents of the schib for subchannel sid to out_schib. </p>
<p>Although the schib may be in memory that is addressable by the picochan CSS, it is architecturally independent and no part of the CSS API relies on that. pch_sch_store is the architectural API that provides access to the contents of the schib by copying it from its internal location to the application-visible memory pointed to by out_schib. The PMCW and SCSW parts of the schib are architectural and can be relied on to be as documented. The rest of the schib - the Model Dependent Area (MDA) - is intended to be an internal implementation detail. </p>

</div>
</div>
<a id="ga8f3271b3a82985e9c76d448ac2f1d5db" name="ga8f3271b3a82985e9c76d448ac2f1d5db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f3271b3a82985e9c76d448ac2f1d5db">&#9670;&#160;</a></span>pch_sch_store_pmcw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_store_pmcw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pmcw_8h.html#af73e82a305fab4742b63ccfe6aa36e2b">pch_pmcw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_pmcw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the contents of the PMCW part of the schib for subchannel sid to out_pmcw. </p>
<p>This is a convenience/optimised subset of pch_sch_store that only stores the PMCW part of the schib. </p>

</div>
</div>
<a id="gaaa294ff939b747f4625c3454c7b1de81" name="gaaa294ff939b747f4625c3454c7b1de81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa294ff939b747f4625c3454c7b1de81">&#9670;&#160;</a></span>pch_sch_store_scsw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_store_scsw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>out_scsw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores the contents of the SCSW part of the schib for subchannel sid to out_scsw. </p>
<p>This is a convenience/optimised subset of pch_sch_store that only stores the SCSW part of the schib. </p>

</div>
</div>
<a id="ga13a70bb0036e2d1d807cf89c4ad72e59" name="ga13a70bb0036e2d1d807cf89c4ad72e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13a70bb0036e2d1d807cf89c4ad72e59">&#9670;&#160;</a></span>pch_sch_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>scsw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test the status of a subchannel, clearing various status conditions of status is pending. </p>
<p>Retrieves a SCSW representing the current status of a subchannel. If the subchannel is "status pending", removes it from the list of subchannels that are the cause of an I/O interruption condition (or callback) and clears pending function conditions and, if set, the "Suspended" condition. </p>

</div>
</div>
<a id="ga11aff02d884b730ca27b9b39ca331b5c" name="ga11aff02d884b730ca27b9b39ca331b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11aff02d884b730ca27b9b39ca331b5c">&#9670;&#160;</a></span>pch_sch_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>scsw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for an I/O interruption condition for subchannel sid. </p>
<p>This is a convenience function which loops calling pch_sch_test on the subchannel, returning with the fetched SCSW when the subchannel becomes status pending. In between each call to pch_sch_test, the function calls __wfe() since the subchannel can only become status pending after the CSS processes an interrupt. This function must only be called while the ISC for the subchannel is masked or else there is a race condition with any I/O ISR such as pch_css_io_irq_handler which would process the I/O interruption itself. </p><dl class="section return"><dt>Returns</dt><dd>Condition code - returned from pch_sch_test (will not be 1 since the function loops in this case) </dd></dl>

</div>
</div>
<a id="ga1d47307d6ee59b624f40528f6d270fa5" name="ga1d47307d6ee59b624f40528f6d270fa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d47307d6ee59b624f40528f6d270fa5">&#9670;&#160;</a></span>pch_sch_wait_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pch_sch_wait_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="scsw_8h.html#ad6e95e2ce5ec537f79eda577b03cae8b">pch_scsw_t</a> *</td>          <td class="paramname"><span class="paramname"><em>scsw</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absolute_time_t</td>          <td class="paramname"><span class="paramname"><em>timeout_timestamp</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for an I/O interruption condition for subchannel sid with a timeout. </p>
<p>This is a convenience function which behaves the same as pch_sch_wait except that it also returns if the timeout expires (i.e. absolute time timeout_timestamp is reached) without the subchannel having become status pending. </p>

</div>
</div>
<a id="ga99bbed087f8d0aea5f6d6f240316c3fa" name="ga99bbed087f8d0aea5f6d6f240316c3fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99bbed087f8d0aea5f6d6f240316c3fa">&#9670;&#160;</a></span>pch_test_pending_interruption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="intcode_8h.html#a842ba171eeebce9d1277c4d801753759">pch_intcode_t</a> pch_test_pending_interruption </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test if there is a pending I/O interruption. </p>
<p>If there is at least one subchannel which is "status pending" with an interruption condition then pch_test_pending_interruption returns an <a class="el" href="intcode_8h.html#a842ba171eeebce9d1277c4d801753759">pch_intcode_t</a> containing the sid of the subchannel, its ISC, a condition code field of 1 and removes the subchannel from the list of those with a pending I/O interruption condition. If there is no such subchannel the condition code field of the returned <a class="el" href="intcode_8h.html#a842ba171eeebce9d1277c4d801753759">pch_intcode_t</a> is 0.</p>
<p>This function should only be called if the ISCs of any subchannels that may become pending are masked or else there is a race condition with any I/O ISR such as pch_css_io_irq_handler which would process the I/O interruption itself. </p>

</div>
</div>
<a id="gae253dc22706dbda9b556123e6d0a7d18" name="gae253dc22706dbda9b556123e6d0a7d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae253dc22706dbda9b556123e6d0a7d18">&#9670;&#160;</a></span>void()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__picochan__base.html#ga886598d19531aab53d3ff165b37dcde8">pch_sid_t</a></td>          <td class="paramname"><span class="paramname"><em>sid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint</td>          <td class="paramname"><span class="paramname"><em>count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enabled</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls <a class="el" href="#ga6e073b7261c9901822d3c54ebe4cdf04" title="Modifies enabled flag of the schib for subchannel sid.">pch_sch_modify_enabled()</a> on count subchannels starting from sid, panicking if any call fails. </p>
<p>Calls <a class="el" href="#ga005e8f9c6d0ee62f862a41b56d05fe2c" title="Modifies traced flag of the schib for subchannel sid.">pch_sch_modify_traced()</a> on count subchannels starting from sid, panicking if any call fails.</p>
<p>Calls <a class="el" href="#ga6e073b7261c9901822d3c54ebe4cdf04" title="Modifies enabled flag of the schib for subchannel sid.">pch_sch_modify_enabled()</a> on count subchannels starting from sid, panicking if any call fails. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
