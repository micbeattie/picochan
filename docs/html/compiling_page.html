<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Picochan: Compiling using Picochan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Picochan<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Picochan documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('compiling_page.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Compiling using Picochan </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_2compiling"></a></p>
<p>Picochan is written in C using the Pico SDK. It uses CMake in the way recommended by that SDK. Similarly to how the Pico SDK divides into multiple modules with names of the form <span class="tt">pico_foo</span> and <span class="tt">hardware_foo</span>, Picochan is divided into three CMake modules:</p><ul>
<li><span class="tt">picochan_base</span></li>
<li><span class="tt">picochan_css</span></li>
<li><span class="tt">picochan_cu</span></li>
</ul>
<p>Application code need only compile with the <span class="tt">picochan_base</span> and <span class="tt">picochan_css</span> modules.</p>
<p>Device driver code need only compile with the <span class="tt">picochan_base</span> and <span class="tt">picochan_cu</span> modules.</p>
<p>This Doxygen-format Picochan documentation is in its early stages and does not separate API information clearly enough from internal implementation details. In an attempt to make some sort of separation, much of the Doxygen documentation (generated from code comments) has been marked as belonging to a "Doxygen topic" with a name of either <span class="tt">picochan_base</span>, <span class="tt">picochan_css</span>, <span class="tt">picochan_cu</span> or <span class="tt">internal_foo</span> (for various values of <span class="tt">foo</span>). The intent is that any Doxygen topic with prefix <span class="tt">internal_</span> is not intended for API use but there may be mis-classifications.</p>
<p>More documentation is needed on how to compile against Picochan but in brief:</p><ul>
<li>Prepare your CMakeLists.txt in the usual way for Pico SDK</li>
<li><p class="startli">Set environment variable <span class="tt">PICO_SDK_PATH</span> to the path of the Picochan library source - the <span class="tt">src/picochan</span> subtree of the Picochan repository. This path is the one which contains the top-level <span class="tt">CMakeLists.txt</span> file starting:</p>
<div class="fragment"><div class="line">if (EXISTS ${CMAKE_CURRENT_LIST_DIR}/base/include/picochan/ccw.h)</div>
</div><!-- fragment --><p> It is <em>not</em> the root directory of the repository (which contains subdirectories "src" and "tools") nor is it the "base" subdirectory of the library source subtree which contains a <span class="tt">CMakeLists.txt</span> file starting:</p>
<div class="fragment"><div class="line">add_library(picochan_base INTERFACE)</div>
</div><!-- fragment --></li>
<li>In your own <span class="tt">CMakeLists.txt</span> file for your software, add the following in appropriate places<ul>
<li>Before any <span class="tt">target_compile_definitions</span> or similar, add <div class="fragment"><div class="line">include($ENV{PICOCHAN_PATH}/CMakeLists.txt)</div>
</div><!-- fragment --></li>
<li>In the <span class="tt">target_link_libraries</span> section for your target<ul>
<li>add <span class="tt">picochan_css</span> if using application API (to CSS)</li>
<li>add <span class="tt">picochan_cu</span> if using device driver API (on CU)</li>
<li>add <span class="tt">hardware_dma</span> and <span class="tt">hardware_pio</span> if using any pio channels</li>
<li>add <span class="tt">hardware_uart</span> if using any uart channels</li>
</ul>
</li>
<li>In the <span class="tt">target_compile_definitions</span> for your target, add any desired settings to any extra runtime sanity and argument checks for Debug builds or to enable tracing, such as <div class="fragment"><div class="line">PARAM_ASSERTIONS_ENABLED_PCH_CUS=1</div>
<div class="line">PARAM_ASSERTIONS_ENABLED_PCH_DMACHAN=1</div>
<div class="line">PARAM_ASSERTIONS_ENABLED_PCH_TRC=1</div>
<div class="line">PARAM_ASSERTIONS_ENABLED_PCH_TXSM=1</div>
<div class="line">PARAM_ASSERTIONS_ENABLED_PCH_CSS=1</div>
</div><!-- fragment --></li>
<li>Add definitions to choose sizes for various global tables if the defaults are not suitable (and they may well not be).<ul>
<li>Examples for using CSS: <div class="fragment"><div class="line">PCH_NUM_CSS_CUS=4</div>
<div class="line">PCH_NUM_SCHIBS=40</div>
</div><!-- fragment --></li>
<li>Examples for using CU: <div class="fragment"><div class="line">PCH_NUM_CUS=2</div>
</div><!-- fragment --> </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
